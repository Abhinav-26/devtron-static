/**handles:fragment**/
function extend(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function debounce(t,e,n){var i;return function(){var o=this,s=arguments,a=function(){i=null,n||t.apply(o,s)},r=n&&!i;clearTimeout(i),i=setTimeout(a,e),r&&t.apply(o,s)}}function areClipPathShapesSupported(){for(var t="clipPath",e=["webkit","moz","ms","o"],n=[t],i=document.createElement("testelement"),o="polygon(50% 0%, 0% 100%, 100% 100%)",s=0,a=e.length;s<a;s++){var r=e[s]+t.charAt(0).toUpperCase()+t.slice(1);n.push(r)}for(var s=0,a=n.length;s<a;s++){var m=n[s];if(""===i.style[m]&&(i.style[m]=o,""!==i.style[m]))return!0}return!1}function getMousePos(t){var e=0,n=0;if(!t)var t=window.event;return t.pageX||t.pageY?(e=t.pageX,n=t.pageY):(t.clientX||t.clientY)&&(e=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=t.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:e,y:n}}function getRandom(t,e){return Math.random()*(e-t+1)+t}function FragmentsFx(t,e){this.el=t,this.options=extend({},this.options),extend(this.options,e);var n=this;imagesLoaded(this.el,{background:!0},function(){n._init()})}const isClipPathSupported=areClipPathShapesSupported();FragmentsFx.prototype.options={fragments:25,boundaries:{x1:100,x2:100,y1:50,y2:50},area:"random",randomIntervals:{top:{min:0,max:90},left:{min:0,max:90},dimension:{width:{min:10,max:60,fixedHeight:1.1},height:{min:10,max:60,fixedWidth:1.1}}},parallax:!1,randomParallax:{min:10,max:150}},FragmentsFx.prototype._init=function(){this.dimensions={width:this.el.offsetWidth,height:this.el.offsetHeight},this.imgsrc=this.el.style.backgroundImage.replace("url(","").replace(")","").replace(/\"/gi,""),this._layout(),this._initEvents()},FragmentsFx.prototype._initEvents=function(){const t=this;this.options.parallax&&(this.mousemoveFn=function(e){requestAnimationFrame(function(){const n=getMousePos(e),i={left:document.body.scrollLeft+document.documentElement.scrollLeft,top:document.body.scrollTop+document.documentElement.scrollTop},o=t.el.getBoundingClientRect(),s={x:n.x-o.left-i.left,y:n.y-o.top-i.top};for(var a=0,r=t.fragments.length;a<=r-1;++a){const m=t.fragments[a],d=m.getAttribute("data-parallax"),h=d/t.dimensions.width*s.x-d/2,l=d/t.dimensions.height*s.y-d/2;m.style.transform=m.style.WebkitTransform="translate3d("+h+"px,"+l+"px,0)"}})},this.el.addEventListener("mousemove",this.mousemoveFn),this.mouseleaveFn=function(e){requestAnimationFrame(function(){for(var e=0,n=t.fragments.length;e<=n-1;++e){const i=t.fragments[e];i.style.transform=i.style.WebkitTransform="translate3d(0,0,0)"}})},this.el.addEventListener("mouseleave",this.mouseleaveFn)),this.debounceResize=debounce(function(e){const n=t.options.area.length;t.dimensions={width:t.el.offsetWidth,height:t.el.offsetHeight};for(var i=0,o=t.fragments.length;i<=o-1;++i)t._positionFragment(i,t.fragments[i].querySelector(".fragment__piece"))},10),window.addEventListener("resize",this.debounceResize)},FragmentsFx.prototype._layout=function(){this.fragments=[];for(var t=0,e=this.options.fragments;t<e;++t){const n=this._createFragment(t);this.fragments.push(n)}},FragmentsFx.prototype._createFragment=function(t){var e=document.createElement("div");e.className="fragment",this.options.parallax&&e.setAttribute("data-parallax",getRandom(this.options.randomParallax.min,this.options.randomParallax.max));var n=document.createElement("div");return n.style.backgroundImage="url("+this.imgsrc+")",n.className="fragment__piece",n.style.backgroundImage="url("+this.imgsrc+")",this._positionFragment(t,n),e.appendChild(n),this.el.appendChild(e),e},FragmentsFx.prototype._positionFragment=function(t,e){const n="random"===this.options.area,i=this.options.area[t],o=n?getRandom(this.options.randomIntervals.top.min,this.options.randomIntervals.top.max):i.top,s=n?getRandom(this.options.randomIntervals.left.min,this.options.randomIntervals.left.max):i.left;var a,r;if(n?Math.round(getRandom(0,1))?(a=getRandom(this.options.randomIntervals.dimension.width.min,this.options.randomIntervals.dimension.width.max),r=getRandom(Math.max(this.options.randomIntervals.dimension.width.fixedHeight-.1,.1),this.options.randomIntervals.dimension.width.fixedHeight+.1)):(r=getRandom(this.options.randomIntervals.dimension.width.min,this.options.randomIntervals.dimension.width.max),a=getRandom(Math.max(this.options.randomIntervals.dimension.height.fixedWidth-.1,.1),this.options.randomIntervals.dimension.height.fixedWidth+.1)):(a=i.width,r=i.height),isClipPathSupported)e.style.WebkitClipPath=e.style.clipPath="polygon("+s+"% "+o+"%, "+(s+a)+"% "+o+"%, "+(s+a)+"% "+(o+r)+"%, "+s+"% "+(o+r)+"%)";else{const m=o/100*this.dimensions.height,d=s/100*this.dimensions.width,h=a/100*this.dimensions.width+d,l=r/100*this.dimensions.height+m;e.style.clip="rect("+m+"px,"+h+"px,"+l+"px,"+d+"px)"}const p={x:getRandom(-1*s/100*this.dimensions.width-this.options.boundaries.x1,this.dimensions.width-s/100*this.dimensions.width+this.options.boundaries.x2-a/100*this.dimensions.width),y:getRandom(-1*o/100*this.dimensions.height-this.options.boundaries.y1,this.dimensions.height-o/100*this.dimensions.height+this.options.boundaries.y2-r/100*this.dimensions.height)};e.style.WebkitTransform=e.style.transform="translate3d("+p.x+"px,"+p.y+"px,0)"},window.FragmentsFx=FragmentsFx;